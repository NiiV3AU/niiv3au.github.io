document.addEventListener("DOMContentLoaded",()=>{const SELECTORS={COPY_BTN:".copy-btn",BUTTON_TEXT:".button-text",CARD:".card",SKILL_ITEM:".skill-item",SKILL_ITEM_ACTION_ICON:".skill-item-action-icon"};const morphIconTemplate=`
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" class="icon">
    <rect width="256" height="256" fill="none" />
    <path class="morph-arrow-path" d="M120,200 L120,136 L56,136 M40,216 L120,136" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/>
    <path class="morph-box-path" d="M160,184h48a8,8,0,0,0,8-8V48a8,8,0,0,0-8-8H80a8,8,0,0,0-8,8V96" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/>
  </svg>
`;const smoothScrollLinks = document.querySelectorAll(".nav-button, .nv3 a[href='#top'], #hero .btn");const headerElement=document.querySelector("header");smoothScrollLinks.forEach((link)=>{link.addEventListener("click",(event)=>{event.preventDefault();const hash=link.hash;if(hash==="#top"){window.scrollTo({top:0,behavior:"smooth"})}else{const targetElement=document.querySelector(hash);if(targetElement){const headerHeight=headerElement?headerElement.offsetHeight:0;const targetPosition=targetElement.offsetTop-headerHeight/2;window.scrollTo({top:targetPosition,behavior:"smooth"})}}})});const copyButtons=document.querySelectorAll(SELECTORS.COPY_BTN);copyButtons.forEach((button)=>{const buttonTextSpan=button.querySelector(SELECTORS.BUTTON_TEXT);if(!buttonTextSpan){console.error(`Could not find “${SELECTORS.BUTTON_TEXT }” in the button:`,button);return}const originalText=buttonTextSpan.textContent;button.addEventListener("click",(event)=>{event.preventDefault();const textToCopy=button.dataset.clipboardText;if(textToCopy&&navigator.clipboard){navigator.clipboard.writeText(textToCopy).then(()=>{buttonTextSpan.textContent="Copied!";button.classList.add("copied-success");setTimeout(()=>{buttonTextSpan.textContent=originalText;button.classList.remove("copied-success")},1500)}).catch((err)=>{console.error("Error when copying to the clipboard:",err);if(buttonTextSpan){buttonTextSpan.textContent="Error!";buttonTextSpan.style.color=getComputedStyle(document.documentElement).getPropertyValue("--error-color").trim();setTimeout(()=>{buttonTextSpan.textContent=originalText;buttonTextSpan.style.color=""},2000)}})}else{console.warn("No text found to copy or clipboard API not available.")}})});let actionIconsData=[];let gsapPluginsRegistered=!1;const animationDuration=0.22;const animationEase="power2.out";const focusAnimationDelay=0.1;const hoverAnimationDelay=0.08;const normalStrokeColor=getComputedStyle(document.documentElement).getPropertyValue("--text-color").trim();const hoverStrokeColor=getComputedStyle(document.documentElement).getPropertyValue("--gsap-accent-color").trim();function registerGsapPluginsOnce(){if(!gsapPluginsRegistered&&typeof gsap!=="undefined"&&typeof MorphSVGPlugin!=="undefined"){gsap.registerPlugin(MorphSVGPlugin);gsapPluginsRegistered=!0;console.log("GSAP MorphSVGPlugin registered.")}else if(!gsapPluginsRegistered){console.warn("GSAP or MorphSVGPlugin not found. Morphing animations will not work.")}return gsapPluginsRegistered}function animateIconState(iconEntry,toHoverState,delay=0){if(!gsapPluginsRegistered){return}if(iconEntry.boxTween){iconEntry.boxTween.kill()}if(iconEntry.arrowTween){iconEntry.arrowTween.kill()}if(iconEntry.colorTween){iconEntry.colorTween.kill()}const targetBoxD=toHoverState?iconEntry.hoverBoxD:iconEntry.normalBoxD;const targetArrowD=toHoverState?iconEntry.hoverArrowD:iconEntry.normalArrowD;const fromStroke=toHoverState?normalStrokeColor:hoverStrokeColor;const toStroke=toHoverState?hoverStrokeColor:normalStrokeColor;iconEntry.boxTween=gsap.to(iconEntry.boxPath,{duration:animationDuration,morphSVG:targetBoxD,ease:animationEase,delay:delay});iconEntry.arrowTween=gsap.to(iconEntry.arrowPath,{duration:animationDuration,morphSVG:targetArrowD,ease:animationEase,delay:delay});iconEntry.colorTween=gsap.fromTo([iconEntry.boxPath,iconEntry.arrowPath],{stroke:fromStroke},{duration:animationDuration,stroke:toStroke,ease:animationEase,delay:delay})}function setupDesktopAnimations(){console.log("Setting up desktop animations...");document.querySelectorAll(SELECTORS.CARD).forEach((card)=>{let animationFrameId=null;card.mouseMoveListener=(e)=>{if(animationFrameId){cancelAnimationFrame(animationFrameId)}animationFrameId=requestAnimationFrame(()=>{const rect=card.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;card.style.setProperty("--mouse-x",`${ x }px`);card.style.setProperty("--mouse-y",`${ y }px`)})};card.addEventListener("mousemove",card.mouseMoveListener);card.addEventListener("mouseleave",()=>{if(animationFrameId){cancelAnimationFrame(animationFrameId)}})});if(!registerGsapPluginsOnce()){return}actionIconsData=[];document.querySelectorAll(SELECTORS.SKILL_ITEM).forEach((skillItemLink)=>{const iconSpan=skillItemLink.querySelector(SELECTORS.SKILL_ITEM_ACTION_ICON);if(!iconSpan){return}const iconEntry={link:skillItemLink,iconSpan:iconSpan,isInitialized:!1,boxPath:null,arrowPath:null,normalBoxD:"M160,184h48a8,8,0,0,0,8-8V48a8,8,0,0,0-8-8H80a8,8,0,0,0-8,8V96",normalArrowD:"M120,200 L120,136 L56,136 M40,216 L120,136",hoverBoxD:"M184,136v72a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V80a8,8,0,0,1,8-8h72",hoverArrowD:"M216,104 L216,40 L152,40 M136,120 L216,40",boxTween:null,arrowTween:null,colorTween:null};const initializeAndAnimate=(toHoverState,delay=0)=>{if(!iconEntry.isInitialized){const placeholderSvg=iconEntry.iconSpan.querySelector("svg");if(placeholderSvg){iconEntry.iconSpan.innerHTML=morphIconTemplate}iconEntry.boxPath=iconEntry.iconSpan.querySelector(".morph-box-path");iconEntry.arrowPath=iconEntry.iconSpan.querySelector(".morph-arrow-path");iconEntry.isInitialized=!0}if(iconEntry.boxPath&&iconEntry.arrowPath){animateIconState(iconEntry,toHoverState,delay)}};iconEntry.mouseEnterHandler=()=>initializeAndAnimate(!0,hoverAnimationDelay);iconEntry.mouseLeaveHandler=()=>initializeAndAnimate(!1,hoverAnimationDelay);iconEntry.focusHandler=()=>initializeAndAnimate(!0,focusAnimationDelay);iconEntry.blurHandler=()=>initializeAndAnimate(!1,focusAnimationDelay);actionIconsData.push(iconEntry);skillItemLink.addEventListener("mouseenter",iconEntry.mouseEnterHandler);skillItemLink.addEventListener("mouseleave",iconEntry.mouseLeaveHandler);skillItemLink.addEventListener("focus",iconEntry.focusHandler);skillItemLink.addEventListener("blur",iconEntry.blurHandler)})}function teardownDesktopAnimations(){console.log("Tearing down desktop animations...");document.querySelectorAll(SELECTORS.CARD).forEach((card)=>{if(card.mouseMoveListener){card.removeEventListener("mousemove",card.mouseMoveListener)}});actionIconsData.forEach((iconEntry)=>{if(iconEntry.boxTween){iconEntry.boxTween.kill()}if(iconEntry.arrowTween){iconEntry.arrowTween.kill()}if(iconEntry.colorTween){iconEntry.colorTween.kill()}if(gsapPluginsRegistered){if(iconEntry.boxPath){gsap.set(iconEntry.boxPath,{attr:{d:iconEntry.normalBoxD},clearProps:"stroke"})}if(iconEntry.arrowPath){gsap.set(iconEntry.arrowPath,{attr:{d:iconEntry.normalArrowD},clearProps:"stroke"})}}else{if(iconEntry.boxPath){iconEntry.boxPath.setAttribute("d",iconEntry.normalBoxD)}if(iconEntry.arrowPath){iconEntry.arrowPath.setAttribute("d",iconEntry.normalArrowD)}}if(iconEntry.link){iconEntry.link.removeEventListener("mouseenter",iconEntry.mouseEnterHandler);iconEntry.link.removeEventListener("mouseleave",iconEntry.mouseLeaveHandler);iconEntry.link.removeEventListener("focus",iconEntry.focusHandler);iconEntry.link.removeEventListener("blur",iconEntry.blurHandler)}});actionIconsData=[]}function skillItemMobileClickHandler(){const linkElement=this.querySelector(SELECTORS.SKILL_ITEM_ACTION_ICON);if(!mediaQuery.matches&&linkElement&&linkElement.href){window.open(linkElement.href,linkElement.target||"_blank")}}function setupSkillItemMobileLinks(){console.log("Setting up mobile skill item links...");const skillItems=document.querySelectorAll(SELECTORS.SKILL_ITEM);skillItems.forEach((item)=>{if(!item.hasMobileClickHandler){item.addEventListener("click",skillItemMobileClickHandler);item.hasMobileClickHandler=!0}})}function teardownSkillItemMobileLinks(){console.log("Tearing down mobile skill item links...");const skillItems=document.querySelectorAll(SELECTORS.SKILL_ITEM);skillItems.forEach((item)=>{if(item.hasMobileClickHandler){item.removeEventListener("click",skillItemMobileClickHandler);item.hasMobileClickHandler=!1}})}const mediaQuery=window.matchMedia("(min-width: 1536px)");const motionQuery=window.matchMedia("(prefers-reduced-motion: reduce)");function updateInterfaceState(){const shouldEnableDesktopAnimations=mediaQuery.matches&&!motionQuery.matches;if(shouldEnableDesktopAnimations){console.log("State update: Desktop animations enabled.");teardownSkillItemMobileLinks();setupDesktopAnimations()}else{console.log("State update: Mobile/Reduced Motion view enabled.");teardownDesktopAnimations();setupSkillItemMobileLinks()}}mediaQuery.addEventListener("change",updateInterfaceState);motionQuery.addEventListener("change",updateInterfaceState);updateInterfaceState()});
